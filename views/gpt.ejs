<!-- Wappler include head-page="layouts/main" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="gpt" appConnect="local" -->
<dmx-value id="varReason"></dmx-value>
<dmx-value id="varResponse"></dmx-value>
<meta name="ac:route" content="/gpt">
<div class="container mt-5">
    <div class="row">
        <div class="col">
            <form id="form1" is="dmx-serverconnect-form" method="post" action="/api/chat-gpt" dmx-on:success="varResponse.setValue(form1.data.api.data.choices[0].text);varReason.setValue(form1.data.api.data.choices[0].finish_reason)">
                <div class="form-group md-3"> <label for="input1" class="form-label">Ask a question</label>
                    <input type="text" class="form-control" id="input1" name="question" aria-describedby="input1_help" placeholder="Enter some text">
                </div>
                <div class="form-group mb-3 row">
                    <div class="col-sm-10">
                        <button id="btn1_submit" type="submit" class="btn btn-primary mt-4" dmx-on:click="varReason.setValue();varResponse.setValue()">
                            <span class="spinner-border spinner-border-sm" role="status" dmx-show="state.executing"></span>Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <p dmx-text="varResponse.value">{{form1.data.api}}</p>
            <p>{{form1.data.api.data.choices[0].finish_reason == 'stop' ? '' : 'Incomplete'}}</p>
        </div>
    </div>
</div>